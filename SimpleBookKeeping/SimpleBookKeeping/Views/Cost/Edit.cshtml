@using System.Web.Optimization
@model SimpleBookKeeping.Models.CostModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Styles.Render("~/cost.css")


<form action="/Cost/Save" method="POST" data-ajax="false">
    <input type="hidden" name="Id" value="@Model.Id" />
    <input type="hidden" name="PlanId" value="@Model.PlanId" />

    <div class="cost-page margin10">
        <input type="text" name="Name" placeholder="Название расходов"
               value="@(Model == null ? string.Empty : Model.Name)" />

        <table>
            <tr><th> Дата </th><th> Сумма </th></tr>
            @{
                int list = 0;
                foreach (var costDetailModel in Model?.CostDetails.OrderBy(x=>x.Date))
                {
                    list++;

                    <tr>
                        <td> @costDetailModel.Date.ToString("dd-MM-yyyy") </td>
                        <td>
                            <input type="hidden" name="CostDetails[@list].Date" value="@costDetailModel.Date.ToString("dd-MM-yyyy")" />
                            <input type="text" name="CostDetails[@list].Value" value="@(costDetailModel.Value == 0 ?
                                                                                            string.Empty : costDetailModel.Value.ToString())" />
                        </td>
                    </tr>

                }
            }
        </table>

    </div>

    <input type="submit" value="Save" />
</form>

<script type="text/javascript">
    backUrl = "/Plan/Index"
</script>
